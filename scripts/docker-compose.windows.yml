version: '3.8'

services:
  windows-builder:
    build:
      context: .
      dockerfile: Dockerfile.windows
    volumes:
      - ./dist:/workspace/dist
      - ./build:/workspace/build
    environment:
      - PYTHONUNBUFFERED=1
    command: /bin/bash -c "
      echo 'ğŸ”¨ Windows ë¹Œë“œë¥¼ ì‹œì‘í•©ë‹ˆë‹¤...' &&
      echo 'ğŸ“¦ ì˜ì¡´ì„± í™•ì¸ ì¤‘...' &&
      pip list | grep -E '(PySide6|opencv|numpy|pandas)' &&
      echo 'ğŸš€ PyInstallerë¡œ ë¹Œë“œ ì¤‘...' &&
      pyinstaller --onefile --windowed --icon=app_icon.ico --name=CMYK_Analyzer run_gui.py &&
      echo 'âœ… ë¹Œë“œ ì™„ë£Œ!' &&
      ls -la dist/ &&
      echo 'ğŸ“ dist/ ë””ë ‰í† ë¦¬ì˜ ë‚´ìš©:' &&
      ls -la dist/ &&
      echo 'ğŸ‰ Windows ë¹Œë“œê°€ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!'
    "
